```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: gift-config
  labels:
    app: gift-service
    project: gift-service
    tier: backend
---
apiVersion: v1
kind: Secret
metadata:
  name: gift-secret
  labels:
    app: gift-service
    project: gift-service
    tier: backend
type: Opaque
data:
  JWT_SECRET: WW4ya2ppYmRkRkFXdG5QSjJBRmxMOFdYbW9oSk1DdmlnUWdnYUV5cGE1RT0=
  KAKAO_CLIENT_ID: YWMyMGQ4NGY5N2I2NzlmMGJiZDlhODA2NWJhODIzZjM=
  KAKAO_CLIENT_SECRET: RnczSmlMNVBrcGV2WFZaOU9pVk04YmZiZ0hVUEQ1RUE=
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: gift-app
  labels:
    app: gift-app
    project: gift-service
    tier: frontend
spec:
  replicas: 1 # From source_2
  selector:
    matchLabels:
      app: gift-app
  template:
    metadata:
      labels:
        app: gift-app
        project: gift-service
        tier: frontend
    spec:
      containers:
      - name: gift-app
        image: sk124590/gift-app:2.1 # From source_2
        ports:
        - containerPort: 8085
        env:
        - name: API_GATEWAY_URI
          valueFrom:
            configMapKeyRef:
              name: gift-config
              key: API_GATEWAY_URI
        - name: KAKAO_REDIRECT_URI
          valueFrom:
            configMapKeyRef:
              name: gift-config
              key: KAKAO_REDIRECT_URI
        - name: JWT_SECRET
          valueFrom:
            secretKeyRef:
              name: gift-secret
              key: JWT_SECRET
        resources:
          requests:
            cpu: "150m"
            memory: "512Mi"
          limits:
            cpu: "1000m"
            memory: "1Gi"
---
apiVersion: v1
kind: Service
metadata:
  name: gift-app-svc
  labels:
    app: gift-app
    project: gift-service
    tier: frontend
spec:
  type: LoadBalancer # Exposing gift-app to external traffic
  ports:
  - port: 8080
    targetPort: 8085
  selector:
    app: gift-app
```

| YAML 위치와 내용                                                                         | 참조된 Source | 비고                   |
| ----------------------------------------------------------------------------------- | ---------- | -------------------- |
| gift-app.Deployment.spec.replicas = 1                                               | source\_2  | gift-app 복제 수 정의     |
| gift-app.Deployment.spec.template.spec.containers\[0].image = sk124590/gift-app:2.1 | source\_2  | gift-app 컨테이너 이미지/버전 |


## 특징: 배포 실패. configMap에서 환경 변수 정의 X